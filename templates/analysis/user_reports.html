{% extends 'base.html' %}

{% block title %}My Reports - Chess Analysis{% endblock %}

{% block content %}
<div class="reports-page-header">
    <h2>My Analysis Reports</h2>
    <div class="generate-buttons-reports">
        <a href="{% url 'analysis:lichess_login' %}" class="lichess-button-small">
            {% load static %}
            <img src="{% static 'images/lichess_logo.svg' %}" alt="Lichess" class="lichess-logo">
            Generate Lichess Report
        </a>
        {% if user.userprofile.chess_com_username %}
        <a href="{% url 'analysis:chess_com_analysis' user.userprofile.chess_com_username %}" class="chess-com-button-small">
            <img src="{% static 'images/chess_com_logo.png' %}" alt="Chess.com" class="chess-com-logo">
            Generate Chess.com Report
        </a>
        {% endif %}
    </div>
</div>

{% if reports %}
    <p>Here are all your chess analysis reports:</p>

    {% for report in reports %}
    <a href="{% url 'analysis:view_report' report.id %}" class="report-card">
        <div class="report-stats-inline">
            <div>
                <strong>{{ report.username }}</strong>
                <span class="report-card-platform">{{ report.platform }}</span>
            </div>
            <div>
                <strong>{{ report.total_games }} Games</strong>
            </div>
            <div>
                {{ report.created_at|date:"M j, Y" }}<br>
                <small>{{ report.created_at|time:"g:i A" }}</small>
            </div>
        </div>
        <div class="report-date-range">
            {% if report.date_range_start and report.date_range_end %}
                Games from {{ report.date_range_start|date:"M j, Y" }}{% if report.date_range_start|date:"M j, Y" != report.date_range_end|date:"M j, Y" %} to {{ report.date_range_end|date:"M j, Y" }}{% endif %}
            {% else %}
                Date range unavailable
            {% endif %}
        </div>
    </a>
    {% endfor %}

{% else %}
    <div class="empty-state">
        <h3>No Reports Yet</h3>
        <p>You haven't generated any analysis reports yet. Use the button above to get started!</p>
    </div>
{% endif %}
{% endblock %}
